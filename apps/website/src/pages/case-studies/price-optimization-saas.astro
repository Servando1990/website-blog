---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import InteractiveCaseStudyDiagram from '../../components/InteractiveCaseStudyDiagram';
import { getCaseStudyBySlug } from '../../lib/caseStudies';

const slug = 'price-optimization-saas';
const caseStudy = getCaseStudyBySlug(slug);

if (!caseStudy) {
  throw new Error(`Missing case study metadata for ${slug}`);
}

const diagramSteps = [
  {
    id: 'raw-data',
    title: 'Raw commerce data',
    summary: 'Catalog, demand, margin, and transaction signals are pulled from source systems.',
    detail:
      'The ingestion layer unifies product, customer, and historical sales data to provide a consistent feature store for pricing decisions.',
    tag: 'Data Inputs',
    tone: 'source',
    metric: 'Multi-source ingestion',
  },
  {
    id: 'demand-curves',
    title: 'Demand curves',
    summary: 'Quantile models estimate demand response under different price points.',
    detail:
      'Quantile regression creates a robust view of likely demand outcomes, not just a single-point prediction, improving pricing reliability.',
    tag: 'Modeling',
    tone: 'model',
    metric: 'Uncertainty-aware forecasts',
  },
  {
    id: 'optimizer',
    title: 'Lagrangian optimizer',
    summary: 'Objective trade-offs are tuned between profit, GMV, and growth targets.',
    detail:
      'The optimization layer applies weighted constraints to generate candidate prices aligned with business priorities and experimentation goals.',
    tag: 'Optimization',
    tone: 'decision',
    metric: 'Multi-objective control',
  },
  {
    id: 'constraints',
    title: 'Business constraints',
    summary: 'Guardrails enforce repricing rules, floors, and strategic boundaries.',
    detail:
      'Constraint handlers validate each recommendation so published prices remain operationally safe and aligned with policy.',
    tag: 'Policy Layer',
    tone: 'processing',
    metric: 'Rule-safe outputs',
  },
  {
    id: 'outputs',
    title: 'Recommended prices',
    summary: 'Final price actions are delivered back to the e-commerce platform.',
    detail:
      'Approved prices are published through automated workflows, creating a repeatable loop between model updates and commercial execution.',
    tag: 'Outcome',
    tone: 'outcome',
    metric: '35% revenue uplift',
  },
];
---

<Layout
  title={`${caseStudy.title} - Case Study - controlthrive`}
  description={caseStudy.summary}
  ogType="article"
  ogImage={`/api/og/case-studies/${slug}.png`}
>
  <Header />
  
  <main class="min-h-screen bg-background editorial-headings">
    <!-- Hero Section -->
    <section class="pt-24 pb-16">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <div class="inline-block bg-accent/10 text-accent-foreground px-3 py-1 rounded-full text-sm font-medium mb-6">
            SaaS
          </div>
          <h1 class="text-4xl md:text-5xl font-bold text-black dark:text-white mb-6">
            Price Optimization for SaaS Product
          </h1>
          <div class="flex flex-wrap gap-2 mb-8">
            <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 px-3 py-1 rounded-full text-sm">
              Machine Learning
            </span>
            <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 px-3 py-1 rounded-full text-sm">
              Pricing Strategy
            </span>
            <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 px-3 py-1 rounded-full text-sm">
              Revenue Optimization
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Content Sections -->
    <section class="pb-24">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto space-y-16">
          
          <!-- Challenge -->
          <div>
            <h2 class="text-3xl font-bold text-black dark:text-white mb-6">
              Challenge
            </h2>
            <div class="prose prose-lg dark:prose-invert">
              <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                The founding team wanted a first fully-scalable product from what they had envisioned from day 1. They wanted a product that would fetch different data sources, apply several machine learning models to them, optimize prices across different goals and constraints, and push prices back to the e-commerce platform.
              </p>
            </div>
          </div>

          <!-- Design -->
          <div>
            <h2 class="text-3xl font-bold text-black dark:text-white mb-6">
              Design
            </h2>
            <div class="prose prose-lg dark:prose-invert">
              <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                Built an end-to-end MLOps pipeline for dynamic pricing optimization using quantile regression as baseline and Lagrangian methods. The system processes e-commerce data through automated workflows, trains demand curve models, and applies multi-objective optimization strategies (profit maximization, sales growth, constraint-based) to generate optimal pricing.
              </p>
              <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                The production application was successfully deployed in collaboration with our partners at Outerbounds. Metaflow workflows were essential in orchestrating the business logic that the founding team envisioned. See what we achieved in <a href="https://outerbounds.com/case-studies/accelerating-ai-driven-pricing-strategies-with-outerbounds" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">this post</a>.
              </p>
            </div>
          </div>

          <!-- Implementation Highlights -->
          <div>
            <h2 class="text-3xl font-bold text-black dark:text-white mb-6">
              Implementation Highlights
            </h2>
            <ul class="list-disc pl-6 space-y-3 text-zinc-600 dark:text-zinc-300 leading-relaxed">
              <li>Quantile regression models predict demand curves instead of single-point forecasts, making pricing more robust under uncertainty.</li>
              <li>Lagrangian optimization balances GMV growth and profit protection with a tunable parameter.</li>
              <li>Constraint handlers and repricing rules keep recommended prices aligned with business guardrails.</li>
            </ul>
            <InteractiveCaseStudyDiagram
              client:visible
              title="Dynamic Pricing Pipeline"
              subtitle="Explore how data, optimization, and guardrails shape final price recommendations."
              steps={diagramSteps}
            />
          </div>

          <!-- Result -->
          <div>
            <h2 class="text-3xl font-bold text-black dark:text-white mb-6">
              Result
            </h2>
            <div class="prose prose-lg dark:prose-invert">
              <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                The system was able to generate optimal pricing for the e-commerce platform, with a 35% increase in revenue and a 25% increase in sales.
              </p>
            </div>
          </div>

          <!-- Takeaway -->
          <div>
            <h2 class="text-3xl font-bold text-black dark:text-white mb-6">
              Takeaway
            </h2>
            <div class="prose prose-lg dark:prose-invert">
              <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                Taking the founding team's vision and early design to a fully data-intensive product and iterating over customer feedback unlocked new revenue streams for the company.
              </p>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-zinc-50 dark:bg-zinc-900/50">
      <div class="container mx-auto px-6">
        <div class="text-center max-w-3xl mx-auto">
          <h2 class="text-3xl font-bold text-black dark:text-white mb-4">
            Ready to Transform Your Business?
          </h2>
          <p class="text-lg text-zinc-600 dark:text-zinc-300 mb-8">
            Let's discuss how AI solutions can drive similar results for your organization.
          </p>
          <a 
            href="https://cal.com/servando-torres/discovery-call" 
            target="_blank" 
            rel="noopener noreferrer"
            class="inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 transition-colors px-8 py-4 rounded-lg font-medium text-lg"
          >
            Schedule a Discovery Call
          </a>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>
